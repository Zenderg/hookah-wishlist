<div class="modal-content">
    <!-- Image at top, full width -->
    <div class="modal-image-container">
      <img
        [ngSrc]="tobacco().imageUrl"
        [alt]="tobacco().name"
        class="modal-image"
        fill
        (error)="onImageError($event)"
      />
    </div>

    <!-- Content with details -->
    <div class="modal-details">
      <!-- Name -->
      <h2 class="tobacco-name">{{ tobacco().name }}</h2>

      <!-- Brand with country -->
      @if (tobacco().brand) {
        <p class="detail-item">{{ displayBrandWithCountry() }}</p>
      }

      <!-- Line (only if lineId is not null) -->
      @if (tobacco().line) {
        <p class="detail-item">Линейка: {{ tobacco().line?.name }}</p>
      }

      <!-- Rating -->
      @if (tobacco().rating && tobacco().ratingsCount) {
        <p class="detail-item">
          Рейтинг: {{ displayRatingFormatted() }} ({{ tobacco().ratingsCount }})
        </p>
      }

      <!-- Strength official -->
      @if (tobacco().strengthOfficial) {
        <p class="detail-item">Крепость официальная: {{ tobacco().strengthOfficial }}</p>
      }

      <!-- Strength by ratings -->
      @if (tobacco().strengthByRatings) {
        <p class="detail-item">Крепость по оценкам: {{ tobacco().strengthByRatings }}</p>
      }

      <!-- Status -->
      @if (tobacco().status) {
        <p class="detail-item">Статус: {{ tobacco().status }}</p>
      }

      <!-- Description (full text with word wrap) -->
      @if (tobacco().description) {
        <p class="detail-item description">{{ tobacco().description }}</p>
      }
    </div>

    <!-- Add/Remove button at bottom, full width -->
    <button
      mat-button
      class="action-button"
      [class.in-wishlist]="inWishlist()"
      (click)="onAddRemoveClick()"
      [disabled]="loading"
    >
      @if (!loading) {
        {{ buttonText() }}
      } @else {
        <mat-spinner diameter="24" class="button-spinner"></mat-spinner>
      }
      </button>
  </div>
