<!-- Image at top, full width -->
<div class="modal-image-container">
  <img
    [ngSrc]="tobacco().imageUrl"
    [alt]="tobacco().name"
    class="modal-image"
    fill
    (error)="onImageError($event)"
  />
</div>

<!-- Content with details - mat-dialog-content handles scrolling automatically -->
<mat-dialog-content>
  <!-- Name -->
  <h2 class="tobacco-name">{{ tobacco().name }}</h2>

  <!-- Brand with country -->
  @if (tobacco().brand) {
    <p class="detail-item"><span class="label">Бренд:</span> {{ displayBrandWithCountry() }}</p>
  }

  <!-- Line (only if lineId is not null) -->
  @if (tobacco().line) {
    <p class="detail-item"><span class="label">Линейка:</span> {{ tobacco().line?.name }}</p>
  }

  <!-- Rating -->
  @if (tobacco().rating && tobacco().ratingsCount) {
    <p class="detail-item">
      <span class="label">Рейтинг:</span> {{ displayRatingFormatted() }} ({{ tobacco().ratingsCount }})
    </p>
  }

  <!-- Strength official -->
  @if (tobacco().strengthOfficial) {
    <p class="detail-item"><span class="label">Крепость официальная:</span> {{ tobacco().strengthOfficial }}</p>
  }

  <!-- Strength by ratings -->
  @if (tobacco().strengthByRatings) {
    <p class="detail-item"><span class="label">Крепость по оценкам:</span> {{ tobacco().strengthByRatings }}</p>
  }

  <!-- Status -->
  @if (tobacco().status) {
    <p class="detail-item"><span class="label">Статус:</span> {{ tobacco().status }}</p>
  }

  <!-- Description (full text with word wrap) -->
  @if (tobacco().description) {
    <p class="detail-item description">{{ tobacco().description }}</p>
  }
</mat-dialog-content>

<!-- Add/Remove button at bottom - mat-dialog-actions handles button layout -->
<mat-dialog-actions align="end">
  <button
    mat-flat-button
    class="action-button"
    [class.in-wishlist]="inWishlist()"
    (click)="onAddRemoveClick()"
    [disabled]="loading"
  >
    @if (!loading) {
      {{ buttonText() }}
    } @else {
      <mat-spinner diameter="24" class="button-spinner"></mat-spinner>
    }
  </button>
</mat-dialog-actions>
